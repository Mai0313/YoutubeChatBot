<center>

# YouTube èŠå¤©å®¤æ©Ÿå™¨äºº

[![python](https://img.shields.io/badge/-Python_3.10_%7C_3.11_%7C_3.12-blue?logo=python&logoColor=white)](https://github.com/pre-commit/pre-commit)
[![uv](https://img.shields.io/badge/-uv_dependency_management-2C5F2D?logo=python&logoColor=white)](https://docs.astral.sh/uv/)
[![Ruff](https://img.shields.io/endpoint?url=https://raw.githubusercontent.com/astral-sh/ruff/main/assets/badge/v2.json)](https://github.com/astral-sh/ruff)
[![tests](https://github.com/Mai0313/youtubechatbot/actions/workflows/test.yml/badge.svg)](https://github.com/Mai0313/youtubechatbot/actions/workflows/test.yml)
[![code-quality](https://github.com/Mai0313/youtubechatbot/actions/workflows/code-quality-check.yml/badge.svg)](https://github.com/Mai0313/youtubechatbot/actions/workflows/code-quality-check.yml)
[![license](https://img.shields.io/badge/License-MIT-green.svg?labelColor=gray)](https://github.com/Mai0313/youtubechatbot/tree/master?tab=License-1-ov-file)
[![PRs](https://img.shields.io/badge/PRs-welcome-brightgreen.svg)](https://github.com/Mai0313/youtubechatbot/pulls)
[![contributors](https://img.shields.io/github/contributors/Mai0313/youtubechatbot.svg)](https://github.com/Mai0313/youtubechatbot/graphs/contributors)

</center>

ğŸ¤– **åŠŸèƒ½å¼·å¤§çš„ YouTube ç›´æ’­èŠå¤©å®¤æ©Ÿå™¨äººï¼Œå¯ä»¥ç›£æ§ç›´æ’­èŠå¤©è¨Šæ¯ä¸¦è‡ªå‹•å›è¦†è§€çœ¾**

å³æ™‚ç›£æ§ YouTube ç›´æ’­èŠå¤©å®¤ï¼Œåˆ†æèŠå¤©è¨Šæ¯ï¼Œä¸¦é€éè‡ªå‹•å›è¦†èˆ‡æ‚¨çš„è§€çœ¾äº’å‹•ã€‚

**å…¶ä»–èªè¨€ç‰ˆæœ¬**: [English](README.md) | [ç¹é«”ä¸­æ–‡](README_cn.md)

## âœ¨ åŠŸèƒ½ç‰¹è‰²

### ğŸŸ¢ **å³æ™‚èŠå¤©å®¤ç›£æ§**

- **å³æ™‚èŠå¤©è¿½è¹¤**: å³æ™‚ç›£æ§ YouTube ç›´æ’­èŠå¤©å®¤è¨Šæ¯
- **å¤šç›´æ’­æ”¯æ´**: é€£æ¥åˆ°ä¸åŒçš„ YouTube ç›´æ’­ä¸²æµ
- **è¨Šæ¯éæ¿¾**: éæ¿¾å’Œè™•ç†ç‰¹å®šé¡å‹çš„è¨Šæ¯
- **ç”¨æˆ¶è­˜åˆ¥**: è¿½è¹¤è¨Šæ¯ä½œè€…åŠå…¶è©³ç´°è³‡è¨Š

### ğŸ¤– **è‡ªå‹•å›è¦†ç³»çµ±**

- **æ™ºæ…§å›è¦†ï¼ˆç¤ºä¾‹ï¼‰**: `youtubechatbot.cli` ä¸­çš„ç¤ºä¾‹åŠ©ç†ä½¿ç”¨ OpenAI ç”¢ç”Ÿå›è¦†ä¸¦ç™¼é€
- **OAuth é©—è­‰**: èˆ‡ YouTube API çš„å®‰å…¨é©—è­‰
- **è‡ªè¨‚é‚è¼¯**: ç¹¼æ‰¿ `YoutubeStream` å¯¦ä½œæ‚¨è‡ªå·±çš„å›è¦†é‚è¼¯
- **é€Ÿç‡é™åˆ¶**: è«‹åœ¨æ‚¨çš„è¼ªè©¢é‚è¼¯ä¸­åŠ å…¥ç¯€æµä»¥éµå®ˆ API é™åˆ¶

### âš™ï¸ **ç°¡æ˜“é…ç½®**

- **ç’°å¢ƒè®Šæ•¸**: ä½¿ç”¨ `.env` æª”æ¡ˆé€²è¡Œç°¡å–®è¨­å®š
- **YouTube Data API**: æ•´åˆ YouTube Data API v3
- **OpenAI æ•´åˆ**: ç‚º AI é©…å‹•çš„å›è¦†åšå¥½æº–å‚™ï¼ˆæœªä¾†åŠŸèƒ½ï¼‰
- **CLI å…¥å£**: `youtubechatbot` èˆ‡ `cli` æœƒå•Ÿå‹•ç¤ºä¾‹åŠ©ç†

### ğŸ›¡ï¸ **ç¾ä»£åŒ–é–‹ç™¼**

- **é¡å‹å®‰å…¨**: ä½¿ç”¨ Pydantic æ¨¡å‹çš„å®Œæ•´é¡å‹æç¤º
- **éŒ¯èª¤è™•ç†**: å¼·å¤§çš„éŒ¯èª¤è™•ç†å’Œæ—¥èªŒè¨˜éŒ„
- **æ¸¬è©¦æ”¯æ´**: å®Œæ•´çš„æ¸¬è©¦æ¡†æ¶
- **ç¨‹å¼ç¢¼å“è³ª**: Pre-commit hooks å’Œç¨‹å¼ç¢¼æ ¼å¼åŒ–

## ğŸš€ å¿«é€Ÿé–‹å§‹

### é å‚™æ¢ä»¶

1. **YouTube Data API é‡‘é‘°**: å¾ [Google Cloud Console](https://console.cloud.google.com/) å–å¾—æ‚¨çš„ API é‡‘é‘°
2. **OAuth 2.0 æ†‘è­‰**: ä¸‹è¼‰ `client_secret.json` ä»¥ä½¿ç”¨èŠå¤©å®¤ç™¼è¨ŠåŠŸèƒ½
3. **Python 3.10+**: ç¢ºä¿æ‚¨å®‰è£äº† Python 3.10 æˆ–æ›´æ–°ç‰ˆæœ¬

### å®‰è£æ­¥é©Ÿ

1. **è¤‡è£½å„²å­˜åº«**:

    ```bash
    git clone https://github.com/Mai0313/youtubechatbot.git
    cd youtubechatbot
    ```

2. **å®‰è£ä¾è³´å¥—ä»¶**:

    ```bash
    make uv-install  # å¦‚æœå°šæœªå®‰è£ uv
    uv sync          # å®‰è£å°ˆæ¡ˆä¾è³´
    ```

3. **è¨­å®šç’°å¢ƒè®Šæ•¸**:

    åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„å»ºç«‹ `.env` ä¸¦åŠ å…¥ï¼š

    ```env
    YOUTUBE_DATA_API_KEY=æ‚¨çš„youtube_data_apié‡‘é‘°
    OPENAI_API_KEY=æ‚¨çš„openai_apié‡‘é‘°  # å¯é¸
    ```

4. **é…ç½® OAuthï¼ˆç”¨æ–¼ç™¼é€è¨Šæ¯ï¼‰**:

    - å¾ Google Cloud Console ä¸‹è¼‰ `client_secret.json`
    - æ”¾ç½®æ–¼ `./data/client_secret.json`ï¼ˆè‹¥ç„¡ `data/` è«‹è‡ªè¡Œå»ºç«‹ï¼‰

### åŸºæœ¬ä½¿ç”¨æ–¹å¼ï¼ˆå‡½å¼åº«ï¼‰

#### ç›£æ§ç›´æ’­èŠå¤©å®¤è¨Šæ¯

```python
from youtubechatbot import YoutubeStream

# å»ºç«‹ä¸²æµå¯¦ä¾‹
stream = YoutubeStream(url="https://www.youtube.com/watch?v=æ‚¨çš„å½±ç‰‡ID")

# å–å¾—ä¸€é æœ€è¿‘çš„èŠå¤©å®¤è¨Šæ¯ï¼ˆå…·å‹åˆ¥ï¼‰
resp = stream.get_chat_messages()
for item in resp.items:
    author = item.author_details.display_name if item.author_details else "Unknown"
    print(f"{author}: {item.snippet.display_message}")
```

#### ç™¼é€è¨Šæ¯åˆ°èŠå¤©å®¤

```python
# å›è¦†èŠå¤©å®¤
stream.reply_to_chat("å¤§å®¶å¥½ï¼ ğŸ‘‹")
```

#### å‘½ä»¤åˆ—ä½¿ç”¨æ–¹å¼ï¼ˆç¤ºä¾‹åŠ©ç†ï¼‰

```bash
youtubechatbot  # åŸ·è¡Œ `cli.py` å…§å»ºçš„ç¤ºä¾‹åŠ©ç†ï¼ˆä½¿ç”¨é è¨­ URLï¼‰

python -m youtubechatbot.cli  # ç­‰æ•ˆ
```

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
â”œâ”€â”€ .devcontainer/          # VS Code Dev Container é…ç½®
â”œâ”€â”€ .github/
â”‚   â”œâ”€â”€ workflows/          # CI/CD å·¥ä½œæµç¨‹
â”‚   â””â”€â”€ copilot-instructions.md
â”œâ”€â”€ data/
â”‚   â””â”€â”€ client_secret.json  # OAuth æ†‘è­‰ï¼ˆä¸åœ¨å„²å­˜åº«ä¸­ï¼‰
â”œâ”€â”€ docker/                 # Docker é…ç½®
â”œâ”€â”€ docs/                   # MkDocs æ–‡æª”
â”œâ”€â”€ scripts/                # è‡ªå‹•åŒ–è…³æœ¬
â”œâ”€â”€ src/
â”‚   â””â”€â”€ youtubechatbot/     # ä¸»è¦æ©Ÿå™¨äººå¥—ä»¶
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ cli.py          # æ ¸å¿ƒæ©Ÿå™¨äººåŠŸèƒ½
â”œâ”€â”€ tests/                  # æ¸¬è©¦å¥—ä»¶
â”œâ”€â”€ .env                    # ç’°å¢ƒè®Šæ•¸ï¼ˆä¸åœ¨å„²å­˜åº«ä¸­ï¼‰
â”œâ”€â”€ pyproject.toml          # å°ˆæ¡ˆé…ç½®
â”œâ”€â”€ Makefile               # é–‹ç™¼å‘½ä»¤
â””â”€â”€ README.md
```

## âš™ï¸ é…ç½®è¨­å®š

### ç’°å¢ƒè®Šæ•¸

åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„å»ºç«‹ `.env` æª”æ¡ˆï¼š

```env
YOUTUBE_DATA_API_KEY=æ‚¨çš„youtube_data_apié‡‘é‘°
OPENAI_API_KEY=æ‚¨çš„openai_apié‡‘é‘°  # å¯é¸ï¼Œç”¨æ–¼æœªä¾†çš„ AI åŠŸèƒ½
```

### OAuth è¨­å®šç”¨æ–¼ç™¼é€è¨Šæ¯

1. å‰å¾€ [Google Cloud Console](https://console.cloud.google.com/)
2. å»ºç«‹æ–°å°ˆæ¡ˆæˆ–é¸æ“‡ç¾æœ‰å°ˆæ¡ˆ
3. å•Ÿç”¨ YouTube Data API v3
4. å»ºç«‹ OAuth 2.0 æ†‘è­‰
5. ä¸‹è¼‰ JSON æª”æ¡ˆä¸¦é‡æ–°å‘½åç‚º `client_secret.json`
6. æ”¾ç½®æ–¼ `./data/client_secret.json`ï¼ˆè‹¥ç„¡ `data/` è«‹è‡ªè¡Œå»ºç«‹ï¼‰

### API é€Ÿç‡é™åˆ¶

- **YouTube Data API**: æ¯æ—¥ 10,000 å–®ä½ï¼ˆé è¨­ï¼‰
- **èŠå¤©è¨Šæ¯**: æ¯å‰‡è¨Šæ¯ç´„ 1 å€‹å–®ä½
- **ç™¼é€è¨Šæ¯**: æ¯å‰‡è¨Šæ¯ç´„ 50 å€‹å–®ä½

åœ¨ Google Cloud Console ç›£æ§æ‚¨çš„ä½¿ç”¨é‡ä»¥é¿å…é”åˆ°é™åˆ¶ã€‚

## ğŸ› ï¸ å¯ç”¨å‘½ä»¤

```bash
# é–‹ç™¼ç›¸é—œ
make clean          # æ¸…ç†è‡ªå‹•ç”Ÿæˆçš„æª”æ¡ˆ
make format         # åŸ·è¡Œ pre-commit hooks
make test           # åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
make gen-docs       # ç”Ÿæˆæ–‡æª”

# ä¾è³´ç®¡ç†
make uv-install     # å®‰è£ uv ä¾è³´ç®¡ç†å™¨
uv add <å¥—ä»¶åç¨±>    # æ·»åŠ ç”Ÿç”¢ä¾è³´
uv add <å¥—ä»¶åç¨±> --dev  # æ·»åŠ é–‹ç™¼ä¾è³´

# ç¤ºä¾‹åŠ©ç†
youtubechatbot
python -m youtubechatbot.cli
```

## ğŸ”§ é€²éšä½¿ç”¨

### è‡ªè¨‚è¨Šæ¯è™•ç†

```python
from youtubechatbot import YoutubeStream


class CustomChatBot(YoutubeStream):
    def run_once(self) -> None:
        page = self.get_chat_messages()
        for line in page.splitlines():
            if ":" not in line:
                continue
            author, message = line.split(":", 1)
            if "ä½ å¥½" in message or "hello" in message.lower():
                self.reply_to_chat(f"å“ˆå›‰ {author.strip()}ï¼ ğŸ‘‹")
            elif "å¹«åŠ©" in message or "help" in message.lower():
                self.reply_to_chat("å¯ç”¨æŒ‡ä»¤ï¼š!help, !info, !time")


# ä½¿ç”¨æ‚¨çš„è‡ªè¨‚æ©Ÿå™¨äºº
bot = CustomChatBot(url="https://www.youtube.com/watch?v=æ‚¨çš„å½±ç‰‡ID")
bot.get_chat_messages()
```

### èˆ‡ AI æœå‹™æ•´åˆï¼ˆç¤ºä¾‹ï¼‰

```python
from openai import OpenAI
from youtubechatbot import YoutubeStream


class AIChatBot(YoutubeStream):
    def generate_ai_response(self, message: str) -> str:
        client = OpenAI()
        response = client.chat.completions.create(
            model="gpt-4.1", messages=[{"role": "user", "content": message}]
        )
        return response.choices[0].message.content
```

## ğŸ¯ ä½¿ç”¨æ¡ˆä¾‹

### å…§å®¹å‰µä½œè€…äº’å‹•

- **è‡ªå‹•å•å€™**: è‡ªå‹•æ­¡è¿æ–°è§€çœ¾
- **FAQ å›æ‡‰**: å³æ™‚å›ç­”å¸¸è¦‹å•é¡Œ
- **å…§å®¹ç®¡ç†**: éæ¿¾ä¸¦å›æ‡‰ä¸ç•¶å…§å®¹
- **ä¸²æµäº’å‹•**: å»ºç«‹äº’å‹•éŠæˆ²å’ŒæŠ•ç¥¨

### å•†æ¥­æ‡‰ç”¨

- **å®¢æˆ¶æ”¯æ´**: åœ¨ç›´æ’­æ´»å‹•ä¸­æä¾›å³æ™‚å›æ‡‰
- **ç”¢å“ç™¼è¡¨**: åœ¨ç”¢å“ç™¼è¡¨æœƒæœŸé–“èˆ‡è§€çœ¾äº’å‹•
- **æ•™è‚²å…§å®¹**: åœ¨ç›´æ’­èª²ç¨‹ä¸­å›ç­”å­¸ç”Ÿå•é¡Œ
- **ç¤¾ç¾¤å»ºè¨­**: åœ¨ç›´æ’­ç¤¾ç¾¤ä¸­ä¿ƒé€²åƒèˆ‡

## ğŸ” é—œéµå­—ç™»è¨˜å·¥å…·

ä½¿ç”¨ `get_registered_accounts(target_word)` æ”¶é›†æœ€è¿‘ä¸€é è¨Šæ¯ä¸­æœ‰æåŠé—œéµå­—çš„å”¯ä¸€ç”¨æˆ¶ï¼š

```python
users = stream.get_registered_accounts(target_word="!join")
print(users)
```

## ğŸ”’ å®‰å…¨æ€§èˆ‡éš±ç§

- **OAuth 2.0**: èˆ‡ YouTube çš„å®‰å…¨é©—è­‰
- **API é‡‘é‘°ç®¡ç†**: åŸºæ–¼ç’°å¢ƒè®Šæ•¸çš„æ†‘è­‰å„²å­˜
- **é€Ÿç‡é™åˆ¶**: éµå®ˆ YouTube API é…é¡
- **éŒ¯èª¤è™•ç†**: å„ªé›…è™•ç† API æ•…éšœ

## ğŸš¨ ç–‘é›£æ’è§£

### å¸¸è¦‹å•é¡Œ

**æ©Ÿå™¨äººç„¡æ³•æ¥æ”¶è¨Šæ¯:**

- ç¢ºèª YouTube ç¶²å€æ˜¯ç›´æ’­ä¸²æµ
- æª¢æŸ¥ä¸²æµæ˜¯å¦å•Ÿç”¨èŠå¤©å®¤
- ç¢ºä¿æ‚¨çš„ API é‡‘é‘°æœ‰é©ç•¶æ¬Šé™

**ç„¡æ³•ç™¼é€è¨Šæ¯:**

- ç¢ºèª `client_secret.json` æ­£ç¢ºé…ç½®
- æª¢æŸ¥ OAuth æ¬Šé™åŒ…å«èŠå¤©å®¤ç™¼æ–‡æ¬Šé™
- ç¢ºä¿æ©Ÿå™¨äººå¸³æˆ¶å¯ä»¥åœ¨èŠå¤©å®¤ç™¼æ–‡

**API é…é¡è¶…å‡º:**

- åœ¨ Google Cloud Console ç›£æ§æ‚¨çš„ API ä½¿ç”¨é‡
- ç‚ºé«˜æµé‡ä¸²æµå¯¦ä½œè¨Šæ¯æ‰¹æ¬¡è™•ç†
- å¦‚éœ€è¦å¯è€ƒæ…®å‡ç´šæ‚¨çš„ API é…é¡

## ğŸ¤ è²¢ç»

æˆ‘å€‘æ­¡è¿è²¢ç»ï¼è«‹éš¨æ™‚ï¼š

- **å›å ±éŒ¯èª¤**: ç‚ºæ‚¨é‡åˆ°çš„ä»»ä½•å•é¡Œé–‹å•Ÿ issue
- **è«‹æ±‚åŠŸèƒ½**: ç‚ºæ©Ÿå™¨äººå»ºè­°æ–°åŠŸèƒ½
- **æäº¤æ”¹é€²**: ç‚ºå¢å¼·åŠŸèƒ½å»ºç«‹ pull requests
- **åˆ†äº«ä½¿ç”¨æ¡ˆä¾‹**: å‘Šè¨´æˆ‘å€‘æ‚¨å¦‚ä½•ä½¿ç”¨æ©Ÿå™¨äºº

### é–‹ç™¼è¨­å®š

1. Fork æ­¤å„²å­˜åº«
2. å»ºç«‹åŠŸèƒ½åˆ†æ”¯: `git checkout -b feature/amazing-feature`
3. é€²è¡Œè®Šæ›´ä¸¦æ·»åŠ æ¸¬è©¦
4. åŸ·è¡Œæ¸¬è©¦: `make test`
5. æ ¼å¼åŒ–ç¨‹å¼ç¢¼: `make format`
6. æäº¤è®Šæ›´: `git commit -m 'Add amazing feature'`
7. æ¨é€åˆ°åˆ†æ”¯: `git push origin feature/amazing-feature`
8. é–‹å•Ÿ Pull Request

## ğŸ“– æ–‡æª”

è©³ç´°æ–‡æª”å’Œ API åƒè€ƒï¼Œè«‹è¨ªå•ï¼š[https://mai0313.github.io/youtubechatbot/](https://mai0313.github.io/youtubechatbot/)

## ğŸ‘¥ è²¢ç»è€…

[![Contributors](https://contrib.rocks/image?repo=Mai0313/youtubechatbot)](https://github.com/Mai0313/youtubechatbot/graphs/contributors)

Made with [contrib.rocks](https://contrib.rocks)

## ğŸ“„ æˆæ¬Š

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Š - è©³è¦‹ [LICENSE](LICENSE) æª”æ¡ˆã€‚

---

**ç¥æ‚¨ç›´æ’­æ„‰å¿«ï¼ ğŸ¥âœ¨**
